<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>פנסיון-נט | חפש פנסיון לכלב שלך</title>
    
    <!-- Meta Tags for SEO -->
    <meta name="description" content="מצא את הפנסיון המושלם לכלב שלך. חיפוש לפי מיקום, קרבה וסוג פנסיון.">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;800&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Leaflet Map CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/pensions.css">
    
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/616/616408.png" type="image/png">
</head>
<body class="pensions-page">
    <div class="app-container">
        <!-- Sidebar: List and Filters -->
        <aside class="sidebar">
            <header class="sidebar-header">
                <div class="logo-wrapper">
                    <div class="pensionet-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 18C14.2091 18 16 16.2091 16 14C16 11.7909 14.2091 10 12 10C9.79086 10 8 11.7909 8 14C8 16.2091 9.79086 18 12 18Z" />
                            <circle cx="7.5" cy="7" r="2" />
                            <circle cx="12" cy="5" r="2" />
                            <circle cx="16.5" cy="7" r="2" />
                        </svg>
                    </div>
                    <h1 class="logo-text">פנסיון-נט</h1>
                </div>
                <div class="search-box">
                    <input type="text" id="pensionSearch" placeholder="חפש פנסיון או עיר...">
                    <i class="fas fa-search"></i>
                </div>
                <div class="filters">
                    <button id="sortByDistance" class="filter-btn active">
                        <i class="fas fa-location-arrow"></i> הקרובים אלי
                    </button>
                    <button id="sortByPrice" class="filter-btn">
                        <i class="fas fa-shekel-sign"></i> לפי מחיר
                    </button>
                </div>
            </header>
            
            <div id="pensionList" class="pension-list">
                <!-- List items will be injected here -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>מחפש פנסיונים באזורך...</p>
                </div>
            </div>
        </aside>

        <!-- Main Content: Map -->
        <main class="map-container">
            <div id="map"></div>
            
            <!-- Floating Navigation (Visible on Mobile) -->
            <button id="toggleMobileView" class="mobile-toggle-btn">
                <i class="fas fa-list"></i> הצג רשימה
            </button>

            <!-- User Location Indicator -->
            <div id="locationStatus" class="location-toast" style="display: none;">
                <i class="fas fa-compass fa-spin"></i> מאתר מיקום...
            </div>

            <!-- Admin Access -->
            <div class="admin-access-btn" id="adminLoginTrigger">
                <i class="fas fa-user-shield"></i>
            </div>
        </main>
    </div>

    <!-- Admin Password Modal -->
    <div id="adminModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>כניסת מנהל</h3>
            <p>הזן סיסמה לניהול תצוגת פנסיונים</p>
            <input type="password" id="adminPassword" placeholder="סיסמה...">
            <div class="modal-actions">
                <button onclick="closeAdminModal()" class="btn-secondary">ביטול</button>
                <button onclick="checkAdminPassword()" class="btn-primary">כניסה</button>
            </div>
        </div>
    </div>

    <!-- Admin Confirm Logout Modal -->
    <div id="confirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>יציאה ממצב מנהל</h3>
            <p>האם אתה בטוח שברצונך לצאת? הצ'קבוקסים לניהול יוסתרו.</p>
            <div class="modal-actions">
                <button onclick="closeConfirmModal()" class="btn-secondary">ביטול</button>
                <button onclick="logoutAdmin()" class="btn-primary" style="background: #ef4444; border: none;">צא עכשיו</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="js/pensions.js"></script>
</body>
</html>
